define("util/tools",[],function(){return{trim:$.trim,each:$.each,extend:$.extend,inArray:$.inArray}}),define("util/obj",[],function(){return{}}),define("util/toStr",["util/obj"],function(e){return e.toString}),define("util/type",["util/toStr"],function(e){return{isObject:function(t){return t==null?t:e.call(t)==="[object Object]"},isArray:Array.isArray||function(t){return e.call(t)==="[object Array]"},isFunction:function(t){return e.call(t)==="[object Function]"},isString:function(t){return e.call(t)==="[object String]"}}}),define("inherit",[],function(){return Object.create||function(e){var t=function(){};return t.prototype=e,new t}}),define("arr/arr",[],function(){return[]}),define("parseAttr",["util/tools","util/type","arr/arr"],function(e,t,n){function f(e){return c(l(e))}function l(e){var t=s(e).match(o);return i(t,function(e,n){var r=t[e]=s(n).match(u);r[0]=s(r[0]),r[1]&&(r[1]=s(r[1])),r[0].indexOf("-")!==-1&&(r[0]=s(r[0]).match(a))})}function c(e){var t={};return i(e,function(){var e=this;switch(!0){case e.length===1:t[e[0]]={};break;case r(e[0]):t[e[1]]={method:e[0][0],args:e[0].slice(1)};break;case e[0]in $.fn:t[e[1]]={method:e[0],args:n};break;default:t[e[0]]={}}}),t}var r=t.isArray,i=e.each,s=e.trim,o=/[^;]+/g,u=/[^:]+/g,a=/[^-]+/g;return f}),define("scan.js",["inherit","util/tools","parseAttr"],function(e,t,n){function s(e){return new s.init(e)}function o(e,t){if(t(e))return;e=e.firstChild;while(e)o(e,t),e=e.nextSibling}function u(e){$(e).removeAttr("js")}function a(){var t=e($.fn);return t.length=0,t}var r=t.each,i=t.extend;s.init=function(e){this[0]=e},s.fn=s.init.prototype=s.prototype=i(e($.fn),{rescan:function(){return this.clean().collect()},collect:function(e){var t=this;return o(e||this[0],function(e){return t.getAttr(e)}),this},clean:function(e){var t,n;for(n in this)this.hasOwnProperty(n)&&(t=this[n],t.removeAttr&&t.removeAttr("js"),e&&delete this[n]);return this},getAttr:function(e){if(/text/.test(e.nodeName))return;var t=this,s=$(e),o=s.attr("js");o&&r(n(o),function(n){var r=t.hasOwnProperty(n)&&t[n];r||(r=t[n]=a(),i(r,this)),r[r.length++]=e});if(s.attr("noscan")!==undefined&&s.attr("app")&&e!==t[0])return!0}}),$.fn.getVM=function(e){var t;if(e||!(t=this.data("vmodel")))t=this.data("vmodel",s(this[0]).collect()).data("vmodel");return t}}),define("refresh",["util/tools","util/type"],function(e,t){function u(e){if(!o(e))return!1;var t=e.length,n,r;if(t>1){n=$.type(e[0]);for(r=t-1;r>=0;r--)if($.type(e[r])!==n)return!1;return!0}return!1}function a(){function s(e,t){var o;if(isNaN(e)&&isNaN(t)&&typeof e=="number"&&typeof t=="number")return!0;if(e===t)return!0;if(typeof e=="function"&&typeof t=="function"||e instanceof Date&&t instanceof Date||e instanceof RegExp&&t instanceof RegExp||e instanceof String&&t instanceof String||e instanceof Number&&t instanceof Number)return e.toString()===t.toString();if(e instanceof Object&&t instanceof Object){if(e.isPrototypeOf(t)||t.isPrototypeOf(e))return!1;if(e.constructor!==t.constructor)return!1;if(e.prototype!==t.prototype)return!1;if(i(e,n)>-1||i(t,r)>-1)return!1;for(o in t){if(t.hasOwnProperty(o)!==e.hasOwnProperty(o))return!1;if(typeof t[o]!=typeof e[o])return!1}for(o in e){if(t.hasOwnProperty(o)!==e.hasOwnProperty(o))return!1;if(typeof t[o]!=typeof e[o])return!1;switch(typeof e[o]){case"object":case"function":n.push(e),r.push(t);if(!s(e[o],t[o]))return!1;n.pop(),r.pop();break;default:if(e[o]!==t[o])return!1}}return!0}return!1}var e,t,n,r;if(arguments.length<1)return!0;for(e=1,t=arguments.length;e<t;e++){n=[],r=[];if(!s(arguments[0],arguments[e]))return!1}return!0}function f(e){s(e)&&r(this,e)}var n=e.each,r=e.extend,i=e.inArray,s=t.isObject,o=t.isArray;$.compare=a,f.prototype={each:n,extend:function(e){return r(this,e).refresh()},refresh:function(){var e=this;return e.each(e.model,function(t,n){if(!(t in e.vmodel))return;e.render(t,n)}),e},render:function(e,t){var r=this.model,i=this.oldModel,s=this.vmodel,f=s[e],l=f.method,c=f.args,h=l in $.fn,p=o(t),d=p?u(t):!1,v,m,g;if(a(f.oldValue,t))return;f.oldValue=t;switch(!0){case h&&p&&d:g=[],v=[],m=f.eq(0),h=$.fn[l],n(t,function(e){var t=f.eq(e);t.length||(t=m.clone(),v.push(t[0])),g.push(h.apply(t,c.concat(this)))}),v.length&&(f.eq(-1).after(v),push.apply(f,v));break;case h:g=$.fn[l].apply(f,c.concat(t));break;default:l=t,c=l.args||arr,c=o(c)?c:[c],d=u(c),n(f,function(e){l.apply($(this),d?c[e]:c)})}l==="listen"&&(r[e]=g)}};var l=new f;$.fn.refresh=function(e,t){return l.extend({model:e,vmodel:this.getVM()}),this}}),define("arr/push",["arr/arr"],function(e){return e.push}),define("arr/slice",["arr/arr"],function(e){return e.slice}),define("observe",["util/type","util/tools","arr/push","arr/slice","inherit"],function(e,t,n,r,i){function g(e){return setTimeout(e,4)}function y(){return Math.random().toString(36).substr(2)+Math.random().toString(36).substr(2)}function w(e,t,n){var r=t.split(".");return t=r[0],r=r[1],t in e.$$setters||(e.$$setters[t]={},v(e,t,function(e,t,n){var r=this;a(r.$$setters[t],function(){this.call(r,e,t,n)})})),e.$$setters[t][r||"observe"+y()]=n,e}function E(e){if($.ES5)return;if(e in h)throw new Error("If you want to support IE6/7/8. The property name ["+e+"] can not be observed, "+"because DOM has the same property name. "+"You can use the [jQuery.ES5 = true] to ignore IE6/7/8.")}var s=e.isObject,o=e.isArray,u=e.isFunction,a=t.each,f=t.extend,l=document,c=l.getElementsByTagName("head")[0],h=l.createComment("Kill IE6/7/8"),p=/\[native code\]/,d="undefined",v,m,b={defineProperty:p.test(Object.defineProperty)&&p.test(Object.create)&&Object.defineProperty,__defineSetter__:p.test(Object.prototype.__defineSetter__)&&Object.prototype.__defineSetter__,__defineGetter__:p.test(Object.prototype.__defineGetter__)&&Object.prototype.__defineGetter__};!b.defineProperty&&b.__defineSetter__&&(b.defineProperty=function(e,t,n){b.__defineGetter__.call(e,t,n.get),b.__defineSetter__.call(e,t,n.set)}),b.defineProperty?(m=!0,v=function(e,t,n){var r=e[t]||d,i=!0,s=function(){n.call(e,r,t,e.$$oldValues[t]),e.$$oldValues[t]=r,i=!0,s=function(){var s=e.$$oldValues[t];i=!0;if(deepCompare(s,r))return;n.call(e,r,t,s),e.$$oldValues[t]=r}};delete e[t],b.defineProperty(e,t,{get:function(){return r},set:function(e){r=e;if(!i)return;i=!1,g(s)}})}):"onpropertychange"in c&&(v=function(e,t,n){var r;if(e.onpropertychange)return;r={},e.onpropertychange=function(e){var t=this,i=(e||window.event).propertyName;if(!(i in this.$$setters))return;if(r[i]===undefined){r[i]=!0,n.call(t,t[i],i,t.$$oldValues[i]),t.$$oldValues[i]=t[i];return}if(!r[i])return;r[i]=!1,g(function(){var e=t.$$oldValues[i];r[i]=!0;if(deepCompare(e,t[i]))return;n.call(t,t[i],i,e),t.$$oldValues[i]=t[i]})}});var S={$$proto:{add:function(e,t){return this[e]=t||d,this.$$oldValues[e]="$.observe"+y(),this},remove:function(e){return delete this.$$oldValues[e],"onpropertychange"in this&&this.nodeName!==undefined?this.removeAttribute(e):delete this[e],this},on:function(){var e=this,t=r.call(arguments);return t.length===1?(t=t[0],s(t)?a(t,function(t,n){E(t),w(e,t,n)}):u(t)&&e.each(function(n){E(n),w(e,n,t)})):t.length===2&&isString(t[0])&&u(t[1])&&(E(t[0]),w(e,t[0],t[1])),this},off:function(){var e=this,t=r.call(arguments);return t.length===0?a(e.$$setters,function(t){e.$$setters[t]={}}):t.length>=1&&a(t,function(){var t=this.indexOf("."),n,r;t===0?(r=this.substr(1),a(e.$$setters,function(){r in this&&delete this[r]})):t>0?(n=this.substr(0,t),r=this.substr(t+1),r in e.$$setters[n]&&delete e.$$setters[n][r]):this in e.$$setters&&(e.$$setters[this]={})}),this},each:function(e){var t=this;return a(t.$$oldValues,function(n){e.call(t,n,t[n])}),this},extend:function(){return f.apply(null,[this].concat(r.call(arguments)))}},init:m?function(e){var t=i(this.$$proto),n=t.$$oldValues={};t.$$setters={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t[r]=e[r]);return t}:function(e){var t=c.appendChild(l.createComment("[object Object]")),n=t.$$oldValues={};f(t,this.$$proto).$$setters={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t[r]=e[r]);return t}};$.observe=function(e,t){var n;return s(e)?(n=S.init(e),s(t)||u(t)?n.on(t):n):null}}),define("plus",["util/tools","util/type","scan.js","refresh","observe"],function(e,t){var n=t.isObject,r=t.isArray,i=e.each,s=e.extend;s($.fn,{render:function(e){if(!n(e))return;var t=this,s=$.fn;return i(e,function(e,n){var i=s[e];i&&i[r(n)?"apply":"call"](t,n)}),this},listen:function(e){var t=this;return t.refresh(e),$.observe(e).on(function(e,n){var r={};r[n]=e,t.refresh(r)})}}),$.define=function(e,t){var n=$(e),r;if(!n.length)return;return r={},r=t(r)||r,n.listen(r)};var o={vmodel:{},ready:function(e){var t=this;return $(document).ready(function(){e.call(t.$scan())}),this},$scan:function(){var e=this;return $("[app]").each(function(){var t=$(this),r=t.attr("app"),i=!1;e.vmodel[r]=t.getVM(),e.on(r+".module",function(e,r){if(i||!n(e))return;i=!0,this[r]=t.listen(e),i=!1})}),this}};$.module=s($.observe({}),o)});